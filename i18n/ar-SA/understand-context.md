# فهم السياق

قبل فهم السياق، تأكد من أنك تعلمت [غوروتين](https://tour.golang.org/concurrency/1) و [القنوات](https://tour.golang.org/concurrency/2). ويستخدم السياق أساسا لنقل المعلومات المتعلقة بالسياق بين غوروتن، بما في ذلك: إشارة الإلغاء والمهلة والمواعيد النهائية وكي - ضد وما إلى ذلك.

على سبيل المثال، لدينا دالة قديمة `القلب` التي تطبع `النبضات` كل ثانية:

```go
استيراد الحزمة الرئيسية

(
    "fmt"
    "time"
)

mainc () {
    heartbeat()
}

clc heartbeat() {
    ضع علامة := وقت. (وقت). cond)

    ل {
        <-tick
        fmt. rintln("الضرب")
    }
}
```

إذا أردنا إجهاض نبض القلب كلما ضغطنا على مفتاح الإدخال، قد نبرمج مثل هذا:

```go
تمسك main() {
    أوقف := make(chan struct{})
    اذهب إلى وظيفة () {
        fmt. تعامل()
        مغلق (توقف)
    }()

    heartbeat(stop)
}

Cltbeat(stopc heartbeat) (توقف عن بناء الدردشة {}) {
    ضع علامة := وقت. (وقت). cond)

    لـ {
        اختر {
        حالة <-tick:
        حالة <- توقف:
            العودة
        }
        قدوم. rintln("الضرب")
    }
}
```

لأن هذا النوع من التعليمات البرمجية يستخدم في كثير من الأحيان، قام جولانغ بتلخيص حزمة مساعدة للتعامل معها، تسمى [السياق](https://golang.org/pkg/context/). إذا استخدمنا السياق، ستصبح التعليمات البرمجية أعلاه شيئا كهذا:

```go
func main() {
    ctx، أوقف := context.WithCancel(السياق. ackground())
    اذهب إلى وظيفة () {
        قدم. canln()
        stop()
    }()

    heartbeat(ctx)
}

func heartbeat(tx). ontext) {
    علامة := الوقت. (وقت). cond)

    لـ {
        اختر {
        case <-tick:
        case <-ctx. واحد():
            العودة
        }
        على الأقدام rintln("الضرب")
    }
}
```
