# وقت تشغيل جافا سكريبت

يمكننا استخدام Rod لتقييم شفرة جافا سكريبت عشوائية على الصفحة. مثل استخدامه لقراءة أو تعديل محتوى HTML للصفحة.

## الفترة في الصفحة

على سبيل المثال، استخدم `Page.Eval` لتعيين القيمة العالمية:

```go
page.MustEval(`window.a = {name: 'jack'}`)
```

يمكننا استخدام دالة js لتمرير القيمة كحجج json :

```go
المفتاح:= "a"
بيانات := خريطة[string]سلسلة {"name": "jack"}
page.MustEval(`(kval) => {
    window[k] = val
}`, keyy, data)
```

للحصول على القيمة المرتجعة من Eval:

```go
val := page.MustEval(`a`).Get("name").Str()
fmt.Println(val) // خرج: jack
```

## تعريف دالة عالمية

طريقة `Page.Evaluate` ستنفذ الدالة إذا كان أقصى ما في الخارج هو تعريف الدالة.

على سبيل المثال، سيتم تنفيذ دالة `اختبار` أدناه على الفور، ولن يتم التعامل معها كتعريف للدالة:

```go
page.MustEval('اختبار الدالة () { alert('ok') }`)

page.MustEval('test()`) // الذعر مع عدم تعريف الاختبار
```

لتعريف الدالة العالمية `اختبار` يمكنك برمجة هكذا ، لأن الجزء الخارجي هو مهمة ، وليس تعريف دالة :

```go
page.MustEval('اختبار = وظيفة () { alert('ok') }`)

page.MustEval('test()`)
```

## الفترة على العنصر

`Element.Eval` مماثل مع `Page.Eval`، ولكن مع `تعيين هذا الكائن` إلى العنصر الحالي. على سبيل المثال، لدينا `<button>إرسال</button>` على الصفحة، يمكننا قراءة أو تعديل العنصر باستخدام JS:

```go
el := page.MustElement("زر")
el.MustEval(`this.innerText = "Apply"`) // تعديل المحتوى
txt := el.MustEval(`this.innerText`).Str()
fmt.Println(txt) // خرج: تطبيق
```

## عرض دوال الذهاب إلى الصفحة

يمكننا استخدام `Page.Expose` لفضح وظائف رد الاتصال إلى الصفحة. على سبيل المثال، هنا نحن نعرض دالة لمساعدة الصفحة على حساب تجزئة md5:

```go
page.MustExpose("md5", func(g gson.JSON) (interface{}, error) {
    return md5.Sum([]byte(g.Str()))، صفر
})
```

الآن يمكن للصفحة أن تحتج بهذه الطريقة على كائن النافذة:

```go
هاش := page.MustEval(`window.md5("الاختبار")`).Str()
```
