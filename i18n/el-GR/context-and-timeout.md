# Πλαίσιο και Χρονικό όριο

Στο Golang, συνήθως χρησιμοποιούμε το [Context](https://golang.org/pkg/context/) για να καταργήσουμε τις μακροχρόνιες εργασίες. Το Rod χρησιμοποιεί το Context για να χειριστεί ακυρώσεις για λειτουργίες αποκλεισμού IO, τις περισσότερες φορές είναι χρονικό. Πρέπει να δώσετε ιδιαίτερη προσοχή σε αυτούς.

Αν δεν είστε εξοικειωμένοι με το Περιεχόμενο, παρακαλώ διαβάστε [Κατανόηση Context](understand-context.md) πρώτα.

## Ακύρωση

Για παράδειγμα, ο παρακάτω κώδικας δημιουργεί μια κενή σελίδα και τον πλοηγεί στο "github.com":

```go
page := rod.New().MustConnect().MustPage()
page.MustNavigate("http://github.com")
```

Τώρα, ας υποθέσουμε ότι θέλουμε να ακυρώσουμε το `MustNavigate` αν χρειάζεται περισσότερο από 2 δευτερόλεπτα. Στο Rod μπορούμε να κάνουμε κάτι σαν αυτό:

```go
page := rod.New().MustConnect().MustPage()

ctx, cancel := context.WithCancel(context.Background())
pageWithCancel := page.Context(ctx)

go func() right:
    time. leep(2 * time.Second)
    ακύρωση()
}()

pageWithCancel.MustNavigate ("http://github.com") // θα ακυρωθεί μετά από 2 δευτερόλεπτα
```

Χρησιμοποιούμε τη σελίδα `page.Context` για να δημιουργήσουμε έναν ρηχό κλώνο της σελίδας ``. Κάθε φορά που καλούμε το `ακύρωση`, οι εργασίες που πυροδοτούνται από το `σελίδαWithCancel` θα ακυρωθούν, μπορεί να είναι οποιαδήποτε λειτουργία, όχι μόνο `MustNavigate`. Η σελίδα προέλευσης `` δεν θα επηρεαστεί, αν την χρησιμοποιήσουμε για να καλέσουμε λειτουργίες που δεν θα ακυρωθούν.

Αυτό το στυλ δεν είναι ιδιαίτερο για το Rod, μπορείτε να βρείτε παρόμοια APIs όπως το [Request.WithContext](https://golang.org/pkg/net/http/#Request.WithContext) στην τυπική βιβλιοθήκη.

Επειδή `pageWithCancel` και `σελίδα` είναι ανεξάρτητες μεταξύ τους, λειτουργίες που προκλήθηκαν από `σελίδα` δεν θα επηρεαστούν από την ακύρωση:

```go
page.MustNavigate ("http://github.com") // δεν θα ακυρωθεί μετά από 2 δευτερόλεπτα
```

## Χρονικό όριο

Ο παραπάνω κώδικας είναι απλά ένας τρόπος για το χρονικό όριο μιας λειτουργίας. Στο Golang, το χρονικό όριο είναι συνήθως μόνο μια ειδική περίπτωση ακύρωσης. Επειδή είναι τόσο χρήσιμο, δημιουργήσαμε έναν βοηθό για να κάνουμε το ίδιο πράγμα παραπάνω, Ονομάζεται `Χρονικό όριο`, έτσι ώστε ο παραπάνω κώδικας να μπορεί να μειωθεί όπως παρακάτω:

```go
page := rod.New().MustConnect().MustPage()
page.Timeout(2 * time.Second).MustNavigate ("http://github.com")
```

Το `page.Timeout(2 * time.Second)` είναι η προηγούμενη `σελίδαWithCancel`. Όχι μόνο `Σελίδα`, `Περιηγητής` και `Στοιχείο` έχουν επίσης τους ίδιους βοηθητικούς συνεργάτες.

## Ανίχνευση χρονικού ορίου

Πώς ξέρω αν μια λειτουργία είναι χρονομετρημένη ή όχι? Στο Golang, το χρονικό όριο είναι συνήθως ένας τύπος σφάλματος. Δεν είναι ιδιαίτερο για το Rod. Για τον παραπάνω κώδικα μπορούμε να το κάνουμε αυτό για να εντοπίσουμε το χρονικό όριο:

```go
page := rod.New().MustConnect().MustPage()

err := rod.Try(func() mptom
    page.Timeout(2 * time.Second).MustNavigate ("http://github.com")
})
if errors. s(err, context. eadlineExceeded) {
    // κωδικός για το σφάλμα χρονικού ορίου
} αλλιώς αν err ! nil Ş
    // κώδικας για άλλους τύπους σφάλματος
}
```

Εδώ χρησιμοποιούμε την `rod.Try` για να τυλίξουμε τη λειτουργία που μπορεί να ρίξει ένα σφάλμα χρονικού ορίου.

Θα μιλήσουμε περισσότερο για τον χειρισμό σφαλμάτων στο [Χειρισμός σφαλμάτων](error-handling.md).
