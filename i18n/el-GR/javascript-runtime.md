# Χρόνος Εκτέλεσης JavaScript

Μπορούμε να χρησιμοποιήσουμε το Rod για να αξιολογήσουμε τυχαίο κώδικα javascript στη σελίδα. Όπως το χρησιμοποιήσετε για να διαβάσετε ή να τροποποιήσετε το περιεχόμενο HTML της σελίδας.

## Ο Eval στη σελίδα

Για παράδειγμα, χρησιμοποιήστε το `Page.Eval` για να ορίσετε καθολική αξία:

```go
page.MustEval(`window.a = {name: 'jack'}`)
```

Μπορούμε να χρησιμοποιήσουμε μια λειτουργία js για να περάσουμε την αξία ως json επιχειρήματα:

```go
κλειδί := "a"
δεδομένα := χάρτης[string]συμβολοσειρά{"όνομα": "jack"}
σελίδα.MustEval(`(k, val) => ↑
    παράθυρο[k] = val
}`, key, data)
```

Για να λάβετε την επιστρεφόμενη τιμή από το Eval:

```go
val := page.MustEval(`a`).Get("name").Str()
fmt.Println(val) // έξοδος: jack
```

## Ορισμός μιας καθολικής συνάρτησης

Η μέθοδος `Page.Evaluate` θα εκτελέσει τη συνάρτηση αν το εξόχως απόκεντρό της είναι ένας ορισμός συνάρτησης.

Για παράδειγμα, η συνάρτηση `δοκιμής` παρακάτω θα εκτελεστεί αμέσως, δεν θα αντιμετωπίζεται ως ορισμός συνάρτησης:

```go
page.MustEval(`function test() {alert('ok') }`)

page.MustEval(`test()`) // πανικός χωρίς να ορίζεται η δοκιμή
```

Για να ορίσετε την παγκόσμια συνάρτηση `test` μπορείτε να κάνετε κώδικα όπως αυτό, επειδή το εξόχως απόκεντρο είναι μια εκχώρηση, όχι ορισμός συνάρτησης:

```go
page.MustEval(`test = function () {alert('ok') }`)

page.MustEval(`test()`)
```

## Eval σε ένα στοιχείο

`Στοιχείο. Το Eval` είναι παρόμοιο με την `σελίδα.Eval`, αλλά με το `αυτό το αντικείμενο` να έχει οριστεί στο τρέχον στοιχείο. Για παράδειγμα, έχουμε μια `<button>Υποβολή</button>` στη σελίδα, μπορούμε να διαβάσουμε ή να τροποποιήσουμε το στοιχείο με JS:

```go
el := page.MustElement("button")
el.MustEval(`this.innerText = "Apply"`) // Τροποποιήστε το περιεχόμενο
txt := el.MustEval(`this.innerText`).Str()
fmt.Println(txt) // εξόδου: Εφαρμόστε
```

## Expose Πηγαίνετε συναρτήσεις στη σελίδα

Μπορούμε να χρησιμοποιήσουμε το `Page.Expose` για να εκθέσουμε τις λειτουργίες callback στη σελίδα. Για παράδειγμα, εδώ εκθέτουμε μια συνάρτηση για να βοηθήσουμε τη σελίδα να υπολογίσει md5 hash:

```go
page.MustExpose("md5", func(g gson.JSON) (interface{}, error) {
    return md5.Sum([]byte(g.Str())), nil
})
```

Τώρα η σελίδα μπορεί να επικαλεστεί αυτή τη μέθοδο στο αντικείμενο του παραθύρου:

```go
hash := page.MustEval(`window.md5 ("test")`).Str()
```
