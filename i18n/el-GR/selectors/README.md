# Επιλογείς

Rod παρέχει πολλές μεθόδους για να πάρει στοιχεία. Τα ονόματά τους είναι όλα προκαθορισμένα με `MustElement` ή `Element`. Εάν χρησιμοποιήσετε ένα IDE αφού πληκτρολογήσετε `Στοιχείο`, θα δείτε όλους τους διαθέσιμους επιλογείς όπως παρακάτω:

![επιλογείς](ide-selectors.png)

Αν τοποθετήσετε το ποντίκι πάνω από τη μέθοδο, θα δείτε το doc του όπως παρακάτω:

![ide-doc](ide-doc.png)

Συνήθως, χρειάζεστε μόνο κάποιες βασικές γνώσεις του [Επιλογέα CSS](css-selector) για να επιτύχετε την εργασία αυτοματισμού που θέλετε να κάνετε. Στο υπόλοιπο της τεκμηρίωσης θα χρησιμοποιήσουμε μόνο CSS Selector για να λάβουμε στοιχεία από τη σελίδα.

## Με περιεχόμενο κειμένου

Χρησιμοποιήστε το `ElementR` για να ταιριάξετε στοιχεία με συγκεκριμένο περιεχόμενο κειμένου, όπως επιλέξτε την είσοδο αναζήτησης στο στιγμιότυπο οθόνης παρακάτω:

![ταίριασμα-κείμενο](match-text.png)

```go
page.MustElementR ("input", "Search or jump")
page.MustElementR ("input", "/click/i") // χρησιμοποιήστε τη μη ευαίσθητη σημαία της περίπτωσης "i"
```

Από τη στιγμή που χρησιμοποιούμε [js regex](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp), δεν χρειάζεται να ταιριάζει με ολόκληρο το περιεχόμενο κειμένου. Το κείμενο που ταιριάζει είναι αυτό που βλέπετε πραγματικά στην ιστοσελίδα, όχι ο πηγαίος κώδικας, συγκρίνετε το 1 και 2 στο στιγμιότυπο οθόνης παρακάτω. Μπορείτε να χρησιμοποιήσετε τον βοηθό `αντιγραφής` στο Devtools για να αντιγράψετε το κείμενο στο πρόχειρο σας (δείτε το 4):

![αντιγραφή-κείμενο](copy-text.png)

## Από XPath

Ο επιλογέας CSS είναι ο προτεινόμενος τρόπος για να επιλέξετε στοιχεία επιλογής, όπως δεν μπορείτε να χρησιμοποιήσετε το XPath για να επιλέξετε [αποδιδόμενο κείμενο](https://stackoverflow.com/questions/51992258/xpath-to-find-pseudo-element-after-in-side-a-div-element-with-out-any-content/51993454). Αλλά μερικές φορές XPath μπορεί να είναι handier για τους προγραμματιστές που προέρχονται από άλλες γλώσσες. Χρησιμοποιήστε το `ElementX` για XPath:

```go
page.MustElementX("//h2")
```

## Από Javascript

Αν έχετε ένα σύνθετο ερώτημα ή θέλετε να χρησιμοποιήσετε μια μηχανή ερωτήματος υψηλού επιπέδου, όπως [jQuery](https://jquery.com/):

```go
page.MustElementByJS(`jQuery('επιλογή:επιλεγμένο')[0]`)
```

Στην πραγματικότητα, αν ελέγξετε τον πηγαίο κώδικα άλλων επιλογέων, όπως `Στοιχείο` ή `ElementR`, όλα βασίζονται σε `ElementByJS`, και `Τα ElementByJS` βασίζονται στη Σελίδα `. valuate`, for more details about how to evaluate js, check the [Javascript Runtime](/javascript-runtime.md). Συνήθως, χρησιμοποιείτε το `ElementByJS` για να δημιουργήσετε τον δικό σας επιλογέα για να επεκτείνετε το Rod.

## Επιλογή λίστας στοιχείων

Τα ονόματα των μεθόδων για την απόκτηση πολλαπλών στοιχείων είναι όλα προκαθορισμένα με `MustElements` ή `Elements`. Μια διαφορά κλειδιού μεταξύ ενός επιλογέα και ενός πολλαπλών επιλογέων είναι ο επιλογέας που θα περιμένει το στοιχείο να εμφανιστεί. Αν ένας πολυ-επιλογέας δεν βρει τίποτα, θα επιστρέψει αμέσως μια κενή λίστα.

## Τρέξιμο δέντρου στοιχείων

Υπάρχουν επίσης μερικοί εύχρηστοι επιλογείς για να επιλέξετε στοιχεία μέσα ή γύρω από ένα στοιχείο, όπως `MustParent`, `MustNext`, `MustPrevious`, κλπ.

Εδώ είναι ένα παράδειγμα του πώς χρησιμοποιούμε διάφορους επιλογείς για την ανάκτηση περιεχομένων από μια σελίδα:

```go
// Στη σελίδα awesome-go, εύρεση της συγκεκριμένης ενότητας,
// και ανάκτηση των σχετικών έργων από τη σελίδα.
func main() mptom
    page := rod.New().MustConnect().MustPage("https://github.com/avelino/awesome-go")

    section := page.MustElementR("p", "Selenium and browser control tools"). ustNext()

    // λήψη θυγατρικών στοιχείων ενός στοιχείου
    έργων := ενότητα. ustElements("li")

    για _, έργο := εύρος έργων {
        σύνδεσμος := έργο. ustElement ("a")
        log. rintf(
            "project %s (%s): '%s'",
            σύνδεσμος. Σύνδεσμος ustText(),
            . ustProperty("href"),
            έργο. ustText(),
        )
    }
}
```

## Λήψη στοιχείων από iframes

Για παράδειγμα, θέλουμε να πάρουμε το κουμπί από τα ένθετα iframes:

![iframes](iframes.png)

Ο κώδικας θα μοιάζει με:

```go
frame01 := page.MustElement("iframe").MustFrame()
iframe02 := iframe01.MustElement("iframe").MustFrame()
frame02.MustElement("button")
```

## Αναζήτηση στοιχείων

Υπάρχει ένας άλλος ισχυρός βοηθός για να πάρετε στοιχεία, το `MustSearch`. Είναι λιγότερο ακριβής από τους επιλογείς που αναφέρθηκαν παραπάνω, αλλά είναι χρήσιμο αν θέλετε να πάρετε στοιχεία από βαθιά ένθετα iframes ή shadow-doms.

Η λειτουργικότητα είναι η ίδια με την αναζήτηση των κόμβων [Devtools'](https://developers.google.com/web/tools/chrome-devtools/dom#search), μπορείτε να το χρησιμοποιήσετε για να μάθετε ποια λέξη κλειδί θα χρησιμοποιήσετε για να επιλέξετε το στοιχείο που θέλετε, όπως το στιγμιότυπο οθόνης παρακάτω:

![αναζήτηση](search.png)

Για να αποκτήσουμε το ίδιο στοιχείο από το [Λήψη στοιχείων από iframes](#get-elements-from-iframes), μπορούμε απλά να κάνουμε κώδικα ως εξής:

```go
page.MustSearch ("κουμπί")
```

## Επιλογείς αγώνων

Ράβδος ενθαρρύνει την αυτοματοποίηση χωρίς ύπνο για να μειώσει την flakiness. Όταν μια ενέργεια έχει πολλαπλά αποτελέσματα, δεν χρησιμοποιούμε τον ύπνο για να περιμένουμε τη σελίδα για να ανακατευθύνουμε ή να καθίσουμε κάτω. Για παράδειγμα, όταν συνδέουμε μια σελίδα, ο κωδικός πρόσβασης ίσως λανθασμένος, θέλουμε να χειριστούμε την επιτυχία και την αποτυχία ξεχωριστά. Πρέπει να αποφύγουμε τον κώδικα όπως παρακάτω:

```go
func main() Ř
    page := rod.New().MustConnect().MustPage("https://leetcode.com/accounts/login/")

    page.MustElement("#id_login").MustInput("username")
    page.MustElement("#id_password").MustInput("password").MustPress(input.Enter)

    time.Sleep(10 * time.Second) // Παρακαλούμε αποφύγετε τη χρήση του χρόνου.Sleep!

    if page.MustHas(". av-user-icon-base") {
        // εκτυπώστε το όνομα χρήστη μετά από επιτυχημένη σύνδεση
        fmt. rintln(*el.MustAttribute("title"))
    } αλλιώς αν η σελίδα. ustHas("[data-cy=sign-in-error]") {
        // όταν λανθασμένο όνομα χρήστη ή κωδικός πρόσβασης
        fmt. rintln(el.MustText())
    }
}
```

Αντ' αυτού, θα πρέπει να γράφουμε κώδικα έτσι:

```go
func main() mptom
    page := rod.New().MustConnect().MustPage("https://leetcode.com/accounts/login/")

    page.MustElement("#id_login").MustInput("username")
    σελίδα. ustElement("#id_password").MustInput("κωδικός").MustPress(input.Enter)

    // Θα κρατήσει την δημοσκόπηση μέχρι ένας επιλογέας να βρει μια αντιστοιχία
    σελίδα.Αγώνα().Στοιχείο(". av-user-icon-base").MustHandle(func(e *rod. lement) Ş
        // εκτύπωσε το όνομα χρήστη μετά από επιτυχημένη σύνδεση
        fmt. rintln(*e.MustAttribute("τίτλος"))
    }). lement ("[δεδομένα- cy=sign-in-error]").MustHandle(func(e *rod. μοχλό) {
        // όταν είναι λάθος όνομα χρήστη ή κωδικός πρόσβασης
        πανικό( ustText())
    }).MustDo()
}
```
